<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Use correct character set. -->
  <meta charset="utf-8">
  <!-- Tell IE to use the latest, best version. -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <title>Schliersee-Wanderung</title>
  <script src="lib/jquery-3.3.1.min.js"></script>
  <script src="util.js"></script>
  <script src="lib/Cesium/Cesium.js"></script>
  <script src="lib/plotlyjs-bundle.js"></script>
  <script src="figure.js"></script>
  <style>
    @import url(lib/Cesium/Widgets/widgets.css);
  </style>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="buttons.css">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
</head>

<body>
  <div class="parallax">
    <div class="prl-bg1">
      <div class="caption">
        <span class="title">OUTDOOR-KURS 2018</span>
        <br>
        <span class="subtitle">Alpenwanderung am Schliersee</span>
      </div>
    </div>
  </div>

  <div class="generalInfo">
    <div class="generalInfo textBlock">
      <div class="caption">
        <span class="subtitle">Informationen</span>
      </div>
      <p>Diese Seite wurde im Rahmen der Theorieleistung für den Outdoor-Sportkurs der Liebigschule Gießen zur
        Alpenwanderung am Schliersee 2018 erstellt.</p>
      <p>Mithilfe von <a href="https://cesiumjs.org/">CesiumJS</a> wurde eine 3D-Karte der Umgebung erstellt, in die
        per GPS aufgezeichnete Tourdaten eingebaut wurden.</p>
      <p>Zusammen mit aufgenommenen Bilder, die an ihrer ungefähren Aufnahmeposition platziert wurden, kann man so die
        gesamte Tour noch einmal besichtigen.</p>
      <p>Erstellt wurde dieses Projekt von Dominik Reh und Nicolas Quillfeldt.</p>
    </div>
    <div class="generalInfo textBlock">
      <div class="caption">
        <span class="subtitle">Hinweis</span>
      </div>
      <p>Da die Karte in 3D dargestellt wird, kann es auf alten oder schwachen PCs zu Rucklern kommen.</p>
      <p>Eine Betrachtung auf Smartphones wird daher ebenfalls nicht empfohlen.</p>
    </div>
  </div>

  <!-- Grid Layout -->
  <div class="grid-container">
    <div class="mapNav">
      <h2>Streckenwahl</h2>
      <div class="mapNav-buttonBar hoverEffect">
        <div class="mapNav-navButton" id="day1Button">Tag 1</div>
        <div class="mapNav-navButton" id="day2Button">Tag 2</div>
        <div class="mapNav-navButton" id="day3Button">Tag 3</div>
        <div class="mapNav-navButton" id="day4Button">Tag 4</div>
      </div>
      <div class="mapNav-tourInfo">
        <table class="infoTable">
          <tbody>
            <tr class="infoTable values">
              <td id="length"><span class="value"></span><span class="unit">km</span></td>
              <td id="maxSpeed"><span class="value"></span><span class="unit">km/h</span></td>
            </tr>
            <tr class="infoTable names">
              <td>Streckenl&auml;nge</td>
              <td>Max. Geschwindigkeit</td>
            </tr>
            <tr class="infoTable values">
              <td id="recTime"><span class="value"></span></td>
              <td id="recSpeed"><span class="value"></span><span class="unit">km/h</span></td>
            </tr>
            <tr class="infoTable names">
              <td>Aufzeichnungsdauer</td>
              <td>Durchschnittsgeschwindigkeit</td>
            </tr>
            <tr class="infoTable values">
              <td id="moveTime"><span class="value"></span></td>
              <td id="moveSpeed"><span class="value"></span><span class="unit">km/h</span></td>
            </tr>
            <tr class="infoTable names">
              <td>Bewegungsdauer</td>
              <td>Durchschnittliche Bewegungsgeschwindigkeit</td>
            </tr>
            <tr class="infoTable values">
              <td id="altDiff"><span class="value"></span><span class="unit">m</span></td>
              <td id="vertClimb"><span class="value"></span><span class="unit">m</span></td>
            </tr>
            <tr class="infoTable names">
              <td>H&ouml;henunterschied</td>
              <td>Vertikaler Aufstieg</td>
            </tr>
            <tr class="infoTable values">
              <td id="maxHeight"><span class="value"></span><span class="unit">m</span></td>
              <td id="vertDist"><span class="value"></span><span class="unit">m</span></td>
            </tr>
            <tr class="infoTable names">
              <td>Maximale H&ouml;he</td>
              <td>Vertikale Distanz</td>
            </tr>
            <tr class="infoTable values">
              <td id="minHeight"><span class="value"></span><span class="unit">m</span></td>
              <td id="vertSpeed"><span class="value"></span><span class="unit">m/s</span></td>
            </tr>
            <tr class="infoTable names">
              <td>Minimale H&ouml;he</td>
              <td>Vertikale Geschwindigkeit</td>
            </tr>
            <tr class="infoTable values">
              <td id="maxClimb"><span class="value"></span></td>
              <td id="minClimb"><span class="value"></span></td>
            </tr>
            <tr class="infoTable names">
              <td>Maximale Steigung</td>
              <td>Minimale Steigung</td>
            </tr>
            <tr class="infoTable values">
              <td id="avgClimb"><span class="value"></span></td>
            </tr>
            <tr class="infoTable names">
              <td>Durchschnittliche Steigung</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="mapSlcInfo">
      <div id="plotly" style="width: 100%; height: 300px;" class="plotly-graph-div"></div>
      <script type="text/javascript">
        (function () {
          window.PLOTLYENV = {
            'BASE_URL': 'https://plot.ly'
          };

          var gd = document.getElementById('plotly')
          var resizeDebounce = null;

          function resizePlot() {
            var bb = gd.getBoundingClientRect();
            Plotly.relayout(gd, {
              width: bb.width,
              height: bb.height
            });
          }

          Plotly.plot(gd, {
            data: figure.data,
            layout: figure.layout,
            frames: figure.frames,
            config: {
              "mapboxAccessToken": "pk.eyJ1IjoiY2hyaWRkeXAiLCJhIjoiY2lxMnVvdm5iMDA4dnhsbTQ5aHJzcGs0MyJ9.X9o_rzNLNesDxdra4neC_A",
              "linkText": "Export to plot.ly",
              "showLink": false
            }
          });

          $(document).on("click", "#day1Button", function () {
            if ($(this).hasClass("selected")) {
              Plotly.relayout(gd, 'xaxis.range', [0, 4296]);
              console.log("deselected");

            } else {
              Plotly.relayout(gd, 'xaxis.range', [0, 679]);
            }
          });
          $(document).on("click", "#day2Button", function () {
            if ($(this).hasClass("selected")) {
              Plotly.relayout(gd, 'xaxis.range', [0, 4296]);
            } else {
              Plotly.relayout(gd, 'xaxis.range', [680, 2188])
            }
          });
          $(document).on("click", "#day3Button", function () {
            if ($(this).hasClass("selected")) {
              Plotly.relayout(gd, 'xaxis.range', [0, 4296]);
            } else {
              Plotly.relayout(gd, 'xaxis.range', [2189, 3247])
            }
          });
          $(document).on("click", "#day4Button", function () {
            if ($(this).hasClass("selected")) {
              Plotly.relayout(gd, 'xaxis.range', [0, 4296]);
            } else {
              Plotly.relayout(gd, 'xaxis.range', [3248, 4296])
            }
          });

        }());
      </script>
    </div>
    <div class="mapContainer">
      <div id="cesiumContainer">
        <div id="debug">
          <button id="saveCam">Extract current camera position</button>
          <button id="saveMarkerPos" data-lat="" data-lon="" data-alt="">Extract current Marker position</button>
        </div>
      </div>
    </div>
  </div>

  <div class="imageViewerOverlay">
    <div class="imageViewer">
      <div id="imageViewer-closeButton">x</div>
      <div class="imageSidebar"></div>
      <div class="imageContent"></div>
    </div>
  </div>

</body>

<script src="map.js"></script>

</html>