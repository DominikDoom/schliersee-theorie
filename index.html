<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Use correct character set. -->
  <meta charset="utf-8">
  <!-- Tell IE to use the latest, best version. -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <title>Hello World!</title>
  <script src="lib/jquery-3.3.1.min.js"></script>
  <script src="util.js"></script>
  <script src="lib/Cesium/Cesium.js"></script>
  <script src="lib/plotlyjs-bundle.js"></script>
  <script src="figure.js"></script>
  <style>
    @import url(lib/Cesium/Widgets/widgets.css);
  </style>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="buttons.css">
</head>

<body>
  <div class="parallax">
    <div class="prl-bg1">
      <div class="caption">
        <span class="title">OUTDOOR-KURS 2018</span>
        <br>
        <span class="subtitle">Alpenwanderung am Schliersee</span>
      </div>
    </div>
  </div>


  <!-- Grid Layout -->
  <div class="grid-container">
    <div class="mapNav">
      <h2>Streckenwahl</h2>
      <div class="mapNav-buttonBar hoverEffect">
        <div class="mapNav-navButton" id="day1Button">Tag 1</div>
        <div class="mapNav-navButton" id="day2Button">Tag 2</div>
        <div class="mapNav-navButton" id="day3Button">Tag 3</div>
        <div class="mapNav-navButton" id="day4Button">Tag 4</div>
      </div>
      <div class="mapNav-tourHighlights">


      </div>
    </div>
    <div class="mapSlcInfo">
      <div id="plotly" style="width: 500px; height: 300px;" class="plotly-graph-div"></div>
      <script type="text/javascript">
        (function () {
          window.PLOTLYENV = {
            'BASE_URL': 'https://plot.ly'
          };

          var gd = document.getElementById('plotly')
          var resizeDebounce = null;

          function resizePlot() {
            var bb = gd.getBoundingClientRect();
            Plotly.relayout(gd, {
              width: bb.width,
              height: bb.height
            });
          }

          Plotly.plot(gd, {
            data: figure.data,
            layout: figure.layout,
            frames: figure.frames,
            config: {
              "mapboxAccessToken": "pk.eyJ1IjoiY2hyaWRkeXAiLCJhIjoiY2lxMnVvdm5iMDA4dnhsbTQ5aHJzcGs0MyJ9.X9o_rzNLNesDxdra4neC_A",
              "linkText": "Export to plot.ly",
              "showLink": false
            }
          });

          $(document).on("click", "#day1Button", function () {
            if ($(this).hasClass("selected")) {
              Plotly.relayout(gd, 'xaxis.range', [0, 4296]);
              console.log("deselected");

            } else {
              Plotly.relayout(gd, 'xaxis.range', [0, 679]);
            }
          });
          $(document).on("click", "#day2Button", function () {
            if ($(this).hasClass("selected")) {
              Plotly.relayout(gd, 'xaxis.range', [0, 4296]);
            } else {
              Plotly.relayout(gd, 'xaxis.range', [680, 2188])
            }
          });
          $(document).on("click", "#day3Button", function () {
            if ($(this).hasClass("selected")) {
              Plotly.relayout(gd, 'xaxis.range', [0, 4296]);
            } else {
              Plotly.relayout(gd, 'xaxis.range', [2189, 3247])
            }
          });
          $(document).on("click", "#day4Button", function () {
            if ($(this).hasClass("selected")) {
              Plotly.relayout(gd, 'xaxis.range', [0, 4296]);
            } else {
              Plotly.relayout(gd, 'xaxis.range', [3248, 4296])
            }
          });

        }());
      </script>
    </div>
    <div class="mapContainer">
      <div id="cesiumContainer">
        <div id="debug">
          <button id="saveCam">Extract current camera position</button>
          <input type="checkbox" id="exportClickCoords">
          <label for="exportClickCoords" style="color:white">‚Üê Save Img. Pos. on Click?</label>
        </div>
      </div>
    </div>
  </div>

</body>

<script src="map.js"></script>

</html>